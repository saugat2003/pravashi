{% extends 'base.html' %}

{% block title %}Pradesh Setu - Detailed AI Clause Analysis{% endblock %}

{% block extra_head %}
<style>
    .custom-scrollbar::-webkit-scrollbar { width: 4px; }
    .custom-scrollbar::-webkit-scrollbar-track { background: rgba(124, 179, 66, 0.05); }
    .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(124, 179, 66, 0.3); border-radius: 10px; }
    .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(124, 179, 66, 0.5); }
</style>
{% endblock %}

{% block main_class %}p-0{% endblock %}

{% block header %}
<header class="flex-none pt-4 pb-4 px-4 border-b border-primary/10 z-20">
    <div class="flex items-center justify-between mb-4">
        <button onclick="history.back()" class="p-2 -ml-2 rounded-full hover:bg-primary/10 transition-colors text-gray-600 dark:text-gray-300">
            <span class="material-icons-round text-2xl">arrow_back</span>
        </button>
        <h1 class="text-lg font-semibold text-center flex-1">Contract Analysis</h1>
        <button class="p-2 -mr-2 rounded-full hover:bg-primary/10 transition-colors text-primary">
            <span class="material-icons-round text-2xl">share</span>
        </button>
    </div>
    <!-- Document Info -->
    <div class="flex items-center justify-between bg-white dark:bg-zinc-800/50 p-3 rounded-xl border border-primary/20 shadow-sm backdrop-blur-sm">
        <div class="flex items-center gap-3 overflow-hidden">
            <div class="h-10 w-10 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0 text-primary">
                <span class="material-icons-round">description</span>
            </div>
            <div class="min-w-0">
                <p class="text-sm font-medium truncate">Employment_Contract_Final.pdf</p>
                <p class="text-xs text-gray-500 dark:text-gray-400">Scanned Today &bull; 10:42 AM</p>
            </div>
        </div>
        <div class="flex-shrink-0 flex items-center gap-1 bg-danger/10 text-danger px-2 py-1 rounded-lg border border-danger/20">
            <span class="material-icons-round text-sm">warning</span>
            <span class="text-xs font-bold uppercase tracking-wide">High Risk</span>
        </div>
    </div>
</header>
{% endblock %}

{% block content %}
<!-- Document Viewer -->
<div class="overflow-y-auto custom-scrollbar px-5 py-6 bg-white dark:bg-zinc-900">
    <div class="max-w-prose mx-auto">
        <p class="text-xs font-bold text-gray-400 mb-2 uppercase tracking-widest">Document Text</p>
        <div class="space-y-4 text-sm leading-relaxed text-gray-600 dark:text-gray-300 font-mono">
            <p>1. <span class="font-bold">EMPLOYMENT TERM:</span> The Employee agrees to work for a period of 2 years starting from the date of arrival.</p>
            <p>2. <span class="font-bold">SALARY:</span> The basic monthly salary shall be 1200 QAR.</p>
            <p>3. <span class="font-bold">ACCOMMODATION:</span> Provided by employer.</p>
            <p class="relative">
                4. <span class="font-bold">WORKING HOURS:</span> The employee shall work 8 hours per day, 6 days a week.
                <span class="bg-yellow-500/20 text-yellow-700 dark:text-yellow-200 underline decoration-wavy decoration-1 cursor-pointer">Any additional hours will be compensated at the discretion of the employer.</span>
                <span class="absolute -right-3 top-0 h-2 w-2 rounded-full bg-yellow-500 animate-pulse"></span>
            </p>
            <p>5. <span class="font-bold">LEAVE:</span> 21 days annual leave after completion of 12 months service.</p>
            <p>6. <span class="font-bold">TERMINATION:</span> Either party may terminate with 30 days notice.</p>
            <div class="relative p-1 -mx-1 rounded bg-danger/10 border-l-2 border-danger">
                <p class="text-gray-900 dark:text-white font-medium">
                    7. <span class="font-bold">DOCUMENTS:</span> The employee agrees to surrender their passport to the employer upon arrival for safekeeping purposes for the duration of the contract.
                </p>
                <span class="absolute -right-2 top-0 h-3 w-3 rounded-full bg-danger animate-ping opacity-75"></span>
                <span class="absolute -right-2 top-0 h-3 w-3 rounded-full bg-danger"></span>
            </div>
            <p>8. <span class="font-bold">MEDICAL:</span> Basic medical insurance provided.</p>
            <p>9. <span class="font-bold">TRANSPORT:</span> Provided from accommodation to work site.</p>
            <p>10. <span class="font-bold">DISPUTES:</span> All disputes settled under local jurisdiction.</p>
        </div>
    </div>
</div>

<!-- AI Findings -->
<div class="bg-background-light dark:bg-zinc-800 border-t border-primary/10 shadow-[0_-4px_20px_rgba(0,0,0,0.1)] z-10 rounded-t-2xl -mt-4">
    <div class="w-full flex justify-center pt-3 pb-1">
        <div class="w-12 h-1.5 rounded-full bg-gray-300 dark:bg-gray-600"></div>
    </div>
    <div class="px-5 pb-6 pt-2">
        <div class="flex justify-between items-end mb-4">
            <h2 class="text-lg font-bold">AI Findings</h2>
            <span class="text-xs bg-gray-200 dark:bg-white/10 px-2 py-1 rounded text-gray-600 dark:text-gray-400">2 Issues Found</span>
        </div>
        <div class="space-y-4">
            <!-- Critical Finding -->
            <div class="bg-white dark:bg-zinc-900 rounded-xl p-4 border border-danger/30 shadow-sm">
                <div class="flex gap-4">
                    <div class="flex-shrink-0 mt-1">
                        <div class="w-10 h-10 rounded-full bg-danger/10 flex items-center justify-center text-danger border border-danger/20">
                            <span class="material-icons-round">gpp_bad</span>
                        </div>
                    </div>
                    <div class="flex-1">
                        <div class="flex justify-between items-start">
                            <h3 class="font-bold text-danger text-base">Red Flag: Passport Retention</h3>
                            <span class="text-[10px] font-bold uppercase tracking-wider text-white bg-danger px-1.5 py-0.5 rounded">Illegal</span>
                        </div>
                        <h4 class="text-sm font-semibold mt-1 mb-2">पासपोर्ट जफत (Passport Seizure)</h4>
                        <p class="text-sm text-gray-600 dark:text-gray-400 leading-snug">
                            It is illegal for employers to hold your passport. This limits your freedom of movement.
                        </p>
                        <p class="text-sm text-gray-500 mt-2 italic">
                            "रोजगारदाताले तपाइँको राहदानी राख्नु गैरकानूनी हो। यसले तपाइँको स्वतन्त्रतामा बाधा पुर्‍याउँछ।"
                        </p>
                    </div>
                </div>
            </div>
            <!-- Warning Finding -->
            <div class="bg-white dark:bg-zinc-900 rounded-xl p-4 border border-yellow-500/20 shadow-sm">
                <div class="flex gap-4">
                    <div class="flex-shrink-0 mt-1">
                        <div class="w-10 h-10 rounded-full bg-yellow-500/10 flex items-center justify-center text-yellow-600 dark:text-yellow-500 border border-yellow-500/20">
                            <span class="material-icons-round">priority_high</span>
                        </div>
                    </div>
                    <div class="flex-1">
                        <h3 class="font-bold text-yellow-700 dark:text-yellow-500 text-base">Warning: Undefined Overtime</h3>
                        <h4 class="text-sm font-semibold mt-1 mb-2">अस्पष्ट ओभरटाइम (Unclear Overtime)</h4>
                        <p class="text-sm text-gray-600 dark:text-gray-400 leading-snug">
                            Rate is not specified. "Discretion of employer" can lead to unpaid work.
                        </p>
                        <p class="text-sm text-gray-500 mt-2 italic">
                            "दर तोकिएको छैन। रोजगारदाताको तजबिजमा भन्नुको अर्थ भुक्तानी नपाउन पनि सकिन्छ।"
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI Recommendation -->
        <div class="mt-6 bg-danger text-white rounded-xl shadow-lg shadow-danger/30 p-4">
            <div class="flex items-start gap-3">
                <span class="material-icons-round text-white/90 bg-white/20 rounded-full p-1 text-lg">verified_user</span>
                <div>
                    <h3 class="font-bold text-sm uppercase tracking-wide opacity-90">AI Recommendation</h3>
                    <p class="font-medium text-lg leading-tight mt-0.5">Do not sign this contract.</p>
                    <p class="text-white/80 text-sm mt-1">यो सम्झौतामा हस्ताक्षर नगर्नुहोस्।</p>
                </div>
            </div>
            <div class="grid grid-cols-2 gap-3 mt-4">
                <a href="{% url 'main:embassy_contact_directory' %}" class="flex items-center justify-center gap-2 bg-white text-danger font-bold py-3 px-4 rounded-lg">
                    <span class="material-icons-round text-lg">call</span> Call Embassy
                </a>
                <button class="flex items-center justify-center gap-2 bg-black/20 text-white font-semibold py-3 px-4 rounded-lg border border-white/10">
                    <span class="material-icons-round text-lg">translate</span> Translate All
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block bottom_nav %}{% endblock %}
